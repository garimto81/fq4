# POC Gameplay Verification: 자동전투 기본 + 직접 개입 전술

**Version**: 1.0.0 | **Date**: 2026-02-15 | **Status**: Draft
**기반 문서**: GDD-0001 (참조), PRD-0004 (폐기 대체)

---

## 1. 설계 전환 선언

### 1.1 핵심 전제

**모든 유닛은 기본적으로 AI 자동전투로 싸운다. 플레이어는 아무 유닛이나 선택해서 즉시 직접 제어할 수 있다.**

이것이 원작 First Queen의 Gocha-Kyara를 충실히 재해석한 방향이다. 원작에서도 플레이어는 전장을 관전하다가 유닛 하나를 집어서 직접 움직였고, 나머지는 AI가 자동으로 행동했다. 자동전투가 기본이고, 직접 제어는 전술적 개입이다.

### 1.2 방향 비교

| 항목 | PRD-0003 (폐기) | GDD-0001 (이전) | 본 설계 (채택) |
|------|-----------------|-----------------|----------------|
| 주인공 기본 상태 | AI 100% (방치형) | 수동 조작 80% | **AI 자동전투 (기본)** |
| 직접 제어 | 없음 | WASD 상시 조작 | **언제든 개입 가능** |
| 게임의 재미 | 편성/관전 | 액션/전투 | **관전 + 개입의 긴장** |
| 자동전투 | 게임 전체 | 편의 옵션 | **기본 모드** |
| 플레이어의 역할 | 감독 | 선수 | **감독 겸 에이스** |

### 1.3 이 방향이 재밌는 이유

```
전투 시작 → AI들이 알아서 전투 (관전)
         → "아 저 녀석 위험한데..." (긴장)
         → 유닛 선택 → WASD로 직접 후퇴 (개입)
         → 다시 놓으면 AI 복귀 (관전)
         → "오 잘 싸우네" → "아 저쪽이 밀리는데!" → 부대 전환 → 개입
         → 승리! 내가 개입한 덕분에 이겼다는 확신
```

핵심 감정: **"AI만으로는 부족하지만, 내가 개입하면 달라진다"**

### 1.4 자동/수동 전환 메커니즘

| 상태 | 조건 | 동작 |
|------|------|------|
| 자동전투 (기본) | 게임 시작, 입력 없음 3초 경과 | 선택된 유닛도 AI로 전투 |
| 직접 제어 | WASD/스틱 입력 발생 | 즉시 해당 유닛 수동 전환, AI 비활성 |
| 유닛 전환 | Q/E/Tab 입력 | 이전 유닛 AI 복귀, 새 유닛 직접 제어 대기 |
| 명령만 | C키로 명령 변경 | 직접 제어 없이 AI 행동 방침만 변경 |

---

## 2. POC 구조 총괄

### 2.1 Phase 구성

| Phase | 주제 | POC 수 | 일수 | Gate 조건 |
|-------|------|:------:|:----:|-----------|
| **Phase 0** | 핵심 게임 필 | 4 | 3일 | 1개라도 FAIL 시 전체 재설계 |
| **Phase 1** | 전술적 깊이 | 5 | 5.5일 | 전술 시스템이 전투에 무영향 시 파라미터 재설계 |
| **Phase 2** | 시스템 확장 | 6 | 5일 | 터치 조작 실패 시 터치 UI 재설계 |
| **Phase 3** | 연출/콘텐츠 | 3 | 2.5일 | Rive 실패 시 sprite sheet 전환 |
| **통합** | 전체 통합 | 1 | 0.5일 | 크래시/60FPS 미달 시 개별 수정 |
| **합계** | | **19** | **16.5일** | 버퍼 포함 최대 24.5일 |

### 2.2 이전 PRD-0004와의 변경점

| POC | PRD-0004 | 본 문서 | 변경 사유 |
|-----|----------|---------|-----------|
| T0-01 | 조작 반응성 (수동 기본) | AI 자동전투 품질 + 직접 제어 반응성 | 기본 상태가 자동전투로 변경 |
| T0-03 | AI 성격 차이 (부가 요소) | AI 성격 행동 차이 (자동전투의 재미) | 관전 재미가 핵심으로 승격 |
| T0-04 | 실시간 전투 긴장감 | 직접 개입의 가치 | 개입 vs 방치 비교가 핵심 |
| T1-01 | 유닛/부대 전환 (조작 대상 변경) | 유닛/부대 전환 (직접 제어 대상 변경) | 자동전투 관전 중 위기 대응 |
| T1-04 | 자동전투 전환 (옵션) | 자동/수동 전환 매끄러움 (기본 흐름) | 수동→자동이 아닌 자동→수동→자동 |
| T2-01 | 마법 시스템 | 마법 (AI 자동 시전 + 직접 시전) | AI 자동 시전이 기본, 수동 시전이 개입 |
| T2-02 | 모바일 터치 조작 | 터치로 유닛 선택 + 직접 제어 | 터치 탭으로 유닛 선택 후 개입 |

---

## 3. Phase 0: 핵심 게임 필 (3일)

> Phase 0는 게임의 존재 이유를 검증한다. "자동전투를 보고 있으면 재밌고, 내가 개입하면 결과가 달라진다"는 핵심 체감이 확인되지 않으면 전체 설계를 재검토한다.

### 3.1 POC-T0-01: AI 자동전투 품질 + 직접 제어 반응성

| 항목 | 내용 |
|------|------|
| **검증 질문** | "AI가 알아서 싸울 때 보고 있으면 재밌는가? 내가 개입하면 즉각 반응하는가?" |
| **검증 요소** | ACT-01, ACT-08, ACT-24, ACT-28, ACT-29 |
| **공수** | 1일 |
| **의존성** | 없음 |

**테스트 시나리오:**

```
[시나리오 A: 자동전투 품질]
- 아군 3체 (아레스/타로/엘레인) vs 적 3체 (고블린)
- 전원 AI 자동전투. 플레이어 입력 없음
- 10회 관찰. AI 행동 기록

[시나리오 B: 직접 제어 반응성]
- 자동전투 진행 중, 아레스를 직접 제어로 전환
- WASD 입력 → position 변경까지 시간 측정 (Stopwatch)
- Space 공격 → 공격 모션 시작까지 시간 측정
- 게임패드 동일 측정
```

| 측정 항목 | PASS 기준 | 측정 방법 |
|-----------|-----------|-----------|
| AI 합리성 | 적을 감지하면 교전, HP 낮으면 후퇴, 아군 근처 유지 | 10회 관찰 중 비합리 행동 2회 이하 |
| AI 교전 시작 | 적 감지 후 3초 이내 교전 시작 | 콘솔 로그 |
| 이동 반응성 | WASD 입력 후 50ms 이내 이동 시작 | `Stopwatch` 100회 평균 |
| 공격 반응성 | Space 후 100ms 이내 공격 모션 | `Stopwatch` 100회 평균 |
| 게임패드 일관성 | 키보드와 게임패드 반응 차이 10ms 이하 | `Stopwatch` 비교 |
| 전환 즉시성 | 자동전투 중 WASD 입력 시 0.1초 이내 수동 전환 | 체감 확인 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| AI가 멍하게 서 있음 | `ai_brain.dart` tick 간격 0.3초 → 0.1초 축소, IDLE 탈출 조건 완화 |
| 입력 반응 지연 | 입력 버퍼링 도입 (1프레임 선행 입력 저장), `RawKeyboardListener` 직접 사용 |
| 자동→수동 전환 끊김 | `isPlayerControlled` 플래그 전환 시 AI 상태 즉시 리셋 |

---

### 3.2 POC-T0-02: 타격감 (직접 제어 시)

| 항목 | 내용 |
|------|------|
| **검증 질문** | "직접 제어해서 때릴 때 타격감이 있는가? 자동전투 중에도 타격이 보이는가?" |
| **검증 요소** | ACT-02, ACT-03, SEN-07, SEN-08 |
| **공수** | 1일 |
| **의존성** | T0-01 |

**테스트 시나리오:**

A/B/C 3단계 비교 (직접 제어 상태에서 실행):

| 단계 | 구성 | 기대 체감 |
|------|------|-----------|
| (A) 기본 | 데미지 숫자만 표시 | 밋밋함 |
| (B) 중간 | + 히트 플래시(0.1초) + 넉백(5px) | 때리는 느낌 |
| (C) 풀 | + 히트스톱(2프레임, 개별 `hitStopTimer`) + 카메라 흔들림(2px) + 경직 0.3초 | 확실한 타격감 |

추가 검증: 자동전투 관전 중에도 (B) 이상의 타격 이펙트가 눈에 들어오는지 확인.

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 직접 제어 타격감 | (C) 단계에서 "확실히 때리는 느낌" 체감 |
| 경직 리듬감 | 공격 후 0.3초 이동 제한이 전투 리듬 생성 |
| 관전 시 타격 가시성 | 자동전투 관전 중 히트 플래시/넉백이 눈에 보임 |
| 프레임 유지 | 60FPS 유지 (히트스톱이 프레임 드롭 유발 안 함) |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 타격감 부족 | 히트스톱 1~5프레임 범위 조정, 넉백 3~10px 조정 |
| 관전 시 안 보임 | 히트 플래시 밝기 상향, 넉백 거리 확대 |
| FPS 드롭 | 히트스톱을 게임루프 정지가 아닌 개별 유닛 타이머로 구현 확인 |

---

### 3.3 POC-T0-03: AI 성격 행동 차이 (자동전투의 재미)

| 항목 | 내용 |
|------|------|
| **검증 질문** | "자동전투를 보고 있을 때 각 유닛이 다르게 행동해서 재밌는가?" |
| **검증 요소** | CMD-17, CMD-18, CMD-19 |
| **공수** | 0.5일 |
| **의존성** | 없음 |

**테스트 시나리오:**

```
관전 모드 전용 테스트. 플레이어 입력 일절 없음.

아군 3체:
  - AGGRESSIVE (빨강, 0xFFFF4444): 전사
  - BALANCED (노랑, 0xFFFFCC44): 전사
  - DEFENSIVE (파랑, 0xFF4488FF): 전사

적 3체: 고블린 (동일 스탯)

10회 관찰. 각 유닛의 행동 기록:
  - 최초 교전 시점 (전투 시작 후 몇 초)
  - 리더 위치 대비 평균 거리
  - 총 가한 데미지 / 받은 데미지
  - 후퇴 발생 횟수
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 관전 재미 | 10회 중 7회 이상에서 "유닛마다 다르게 움직이는구나" 인식 가능 |
| 교전 시간차 | AGGRESSIVE vs DEFENSIVE 최초 교전 시점 차이 2초 이상 |
| 성격 구분 | 5초 관찰로 각 유닛의 성격을 맞출 수 있음 |
| 행동 패턴 차이 | AGGRESSIVE가 가장 많은 데미지를 가하고, DEFENSIVE가 가장 적은 데미지를 받음 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 성격 차이 안 느껴짐 | `chase_range_mult`, `retreat_hp_mult` 편차 확대 |
| AGGRESSIVE가 소극적 | 공격 개시 거리 150px → 250px 확대 |
| DEFENSIVE가 공격적 | 후퇴 HP 임계값 39% → 50% 상향 |

---

### 3.4 POC-T0-04: 직접 개입의 가치 (핵심 중의 핵심)

| 항목 | 내용 |
|------|------|
| **검증 질문** | "내가 개입하면 결과가 정말 달라지는가?" |
| **검증 요소** | BTL-01, BTL-02, BTL-03, BTL-06, BTL-07, ACT-29 |
| **공수** | 1일 |
| **의존성** | T0-01, T0-02 |

이 POC가 게임 전체의 성패를 결정한다. 자동전투만으로도 이길 수 있다면 플레이어가 개입할 이유가 없고, 자동전투가 너무 약하면 관전 자체가 성립하지 않는다.

**고정 시나리오:**

```
아군: 아레스 Lv5 (HP100, ATK25) + 타로 Lv3 (HP80, ATK20) + 엘레인 Lv3 (HP60, ATK15)
적:   고블린 5체 Lv3 (HP40, ATK12)
시드: Random(42) 기반 적 배치/AI 랜덤
```

**측정 프로토콜:**

| 모드 | 실행 횟수 | 방법 | 수집 메트릭 |
|------|:---------:|------|-------------|
| 완전 자동 | 50회 | 시뮬레이션 (전원 `isPlayerControlled = false`) | 승률, 평균 사상자, 평균 전투시간 |
| 직접 개입 | 10회 | 직접 플레이 (자동전투 기본 + 위기 시 개입) | 승률, 평균 사상자, 평균 전투시간 |

개입 시나리오 예시:
- 위기 유닛(HP 30% 이하) 발견 시 직접 선택 후 후퇴 조작
- 적이 밀집했을 때 유닛을 직접 이동시켜 집중 공격 유도
- 힐러(엘레인)가 위험 지대에 있으면 직접 안전 지대로 이동
- 적 약한 개체 집중 공격으로 빠른 수적 우위 확보

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 개입 효과 | 수동 승률 - 자동 승률 >= 20% **OR** 수동 평균 생존자 - 자동 평균 생존자 >= 1.0명 |
| 자동전투 최소 품질 | 자동전투 승률 >= 30% (너무 약하면 관전이 불쾌) |
| 자동전투 최대 품질 | 자동전투 승률 <= 70% (너무 강하면 개입 불필요) |
| 주인공 사망 처리 | 아레스 사망 시 GAME OVER 정상 처리 |
| 자동전투 주인공 사망률 | 자동전투 주인공 사망률 < 30% (50회 시뮬 기준). 너무 자주 죽으면 관전이 불안하고, 안 죽으면 긴장감 없음 |
| 개입 체감 | "내가 개입한 덕분에 이겼다"는 주관적 확신 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 개입 효과 미미 (자동 승률 너무 높음) | 적 AI 감지 범위 확대, 적 공격 빈도 상향, 수적 열세 강화 (3v6) |
| 자동전투 너무 약함 | 아군 AI 파라미터 상향 (감지 범위, 협력 행동 강화) |
| 개입과 자동의 차이가 애매 | 직접 조작 유닛에 미세 보너스 (회피+5%, 크리+3%) |

---

### Phase 0 GATE 조건

```
GATE 0: Phase 0 4개 POC 전부 PASS 필수
  - T0-01 FAIL: 조작 프레임워크 자체에 문제 → 엔진 선택 재검토
  - T0-02 FAIL: 타격감 파라미터 조정 (1일 버퍼)
  - T0-03 FAIL: AI 성격 파라미터 조정 (1일 버퍼)
  - T0-04 FAIL: 밸런스 전면 재설계 → 적 AI/아군 AI 파라미터 전체 조정 (2일 버퍼)

  1개 FAIL: 해당 POC 파라미터 조정 후 재검증
  2개 이상 FAIL: 전체 설계 방향 재검토 회의
```

---

## 4. Phase 1: 전술적 깊이 (5.5일)

> Phase 1은 "자동전투를 관전하면서 지휘하는 재미"를 검증한다. 대형/명령/전환/피로도가 자동전투 결과에 의미 있는 영향을 주지 않으면 전술 파라미터를 재설계한다.

### 4.1 POC-T1-01: 유닛/부대 전환 (직접 제어 대상 변경)

| 항목 | 내용 |
|------|------|
| **검증 질문** | "전투 중에 다른 유닛으로 즉시 전환해서 위기를 해결할 수 있는가?" |
| **검증 요소** | ACT-09, ACT-10, ACT-11, ACT-13, CMD-23 |
| **공수** | 1일 |
| **의존성** | T0-01 |

**테스트 시나리오:**

```
2부대 구성:
  부대1: 아레스(전사) + 타로(마법사) + 엘레인(힐러)
  부대2: 시누세(전사) + 소토카(힐러) + 마키(궁수)

시나리오 흐름:
  1. 전투 시작 → 전원 자동전투 (관전)
  2. 타로 HP 30% 이하 발견 → Q/E로 타로 선택
  3. WASD로 타로를 후방으로 직접 후퇴
  4. 입력 멈춤 → 타로 AI 복귀 (자동 회피/휴식)
  5. Tab으로 부대2 전환 → 시누세 선택
  6. 시누세로 적 측면 공격 직접 개입
  7. 입력 멈춤 → 시누세 AI 복귀
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 전환 반응 | Q/E/Tab 후 0.3초 이내 새 유닛 조작 가능 |
| 카메라 전환 | 0.2초 lerp로 부드러운 이동 |
| 게임 연속성 | 전환 중 게임 정지 없음 (전투 계속 진행) |
| AI 자동 복귀 | 이전 조작 유닛이 자동으로 AI 모드 전환 |
| FOLLOW 유지 | 전환 후 부대원이 새 선택 유닛 기준으로 추종 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 전환 후 조작 지연 | 전환 시 AI 상태 즉시 리셋, 입력 버퍼 클리어 |
| 카메라 전환 어색 | lerp 속도 0.1~0.5초 범위 조정 |
| AI 복귀 부자연스러움 | 복귀 시 현재 위치/상황 기반 AI 상태 재판단 로직 추가 |

---

### 4.2 POC-T1-02: 대형이 자동전투에 미치는 영향

| 항목 | 내용 |
|------|------|
| **검증 질문** | "대형을 바꾸면 자동전투 결과가 달라지는가?" |
| **검증 요소** | CMD-01~06, CMD-07 (관찰 기록) |
| **공수** | 2일 |
| **의존성** | T0-03 (권장, 성격 검증 없이도 병렬 실행 가능) |

**테스트 시나리오:**

```
4v4 자동전투. 플레이어 직접 개입 없음 (대형 변경만 수행).
각 대형 5회씩 총 25회. 동일 적 구성, 시드 고정.
```

| 대형 | 기대 특성 |
|------|-----------|
| V_SHAPE | 리더 앞, 부대원 V자 배치. 기본 범용, 빠른 격파 |
| LINE | 횡대 일렬. 넓은 전선, 분산 피해 |
| CIRCLE | 원형 보호. 느린 격파, 낮은 아군 피해 |
| WEDGE | 쐐기 돌격. 최단 전투, 높은 피해 |
| SCATTERED | 분산 배치. 범위 공격 회피 |

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 양상 구분 | 대형별 자동전투 양상이 육안으로 구분 가능 |
| 피해 차이 | CIRCLE 아군 피해가 V_SHAPE 대비 30% 이상 감소 |
| 전투시간 차이 | 대형별 평균 전투시간에 유의미한 차이 존재 (최대/최소 2배 이내) |
| 대형 전환 | 전투 중 대형 변경 명령 후 2초 이내 재배치 완료 |
| 관찰: 대형 유지력 | 이동 중 대형 유지 여부 기록 (PASS/FAIL에 미포함, 데이터 수집) |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 대형 차이 안 느껴짐 | `formation_calculator` 오프셋 간격 확대 |
| 전투 결과 동일 | 대형별 보너스 도입 (V자: ATK+10%, CIRCLE: DEF+15%) |
| 재배치 느림 | AI 이동 속도 일시 상향 (재배치 중 1.5배) |

---

### 4.3 POC-T1-03: 부대 명령의 체감

| 항목 | 내용 |
|------|------|
| **검증 질문** | "명령을 내리면 AI가 즉시 따르고 전투 양상이 바뀌는가?" |
| **검증 요소** | CMD-09, CMD-10, CMD-11, CMD-12, CMD-13, CMD-15 |
| **공수** | 1일 |
| **의존성** | T1-02 |

**테스트 시나리오:**

```
자동전투 진행 중 명령 순환:
  FOLLOW → ATTACK_ALL → HOLD → RETREAT → REST

각 명령 발동 후 AI 행동 변화 관찰.
플레이어는 직접 제어하지 않고 명령만 내림 (지휘관 모드).
```

| 명령 | 기대 행동 | PASS 기준 |
|------|-----------|-----------|
| FOLLOW | 선택 유닛 주변에서 자동전투 | 리더 반경 150px 이내 유지 |
| ATTACK_ALL | 적극적으로 적에게 돌진 | 명령 전 대비 교전 거리 50% 이상 증가 |
| HOLD | 현재 위치에서 방어, 이동 안 함 | 명령 후 위치 이동 0 (적 접근 시에만 교전) |
| RETREAT | 전원 즉시 후방 이동 | 교전 중이던 유닛도 1초 이내 이탈 |
| REST | 제자리에서 피로 회복, 교전 안 함 | 피로도 감소 시작, 적이 접근해도 능동 교전 안 함 |

공통 PASS: 모든 명령에서 명령 후 0.5초 이내 행동 변경 관찰 가능.

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 반응 느림 | AI tick 간격 0.3초 → 0.1초, 명령 수신 시 현재 상태 즉시 전환 |
| RETREAT 안 됨 | 명령 우선순위를 현재 교전보다 높게 설정 |
| 명령 차이 미미 | 명령별 행동 반경/공격성 파라미터 편차 확대 |

---

### 4.4 POC-T1-04: 자동/수동 전환의 매끄러움

| 항목 | 내용 |
|------|------|
| **검증 질문** | "자동전투 보다가 위기 때 개입하고, 다시 놓으면 매끄러운가?" |
| **검증 요소** | ACT-28, ACT-29 |
| **공수** | 0.5일 |
| **의존성** | T0-04 |
| **참고** | 자동전투 관전 시 카메라가 전투 상황을 자연스럽게 추적 (가장 위기 유닛 중심 또는 전체 전장 와이드뷰) |

**테스트 시나리오:**

```
전환 사이클 테스트 (10회 반복):
  1. 게임 시작 → 자동전투 (관전)
  2. 5초 관전 → WASD 입력 → 즉시 수동 전환
  3. 수동으로 5초 조작
  4. 입력 멈춤 → 3초 후 자동 복귀
  5. 다시 관전 → 위기 시 즉시 개입
  이 사이클을 10회 반복
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 자동→수동 전환 | WASD 입력 시 0.1초 이내 수동 전환 |
| 수동→자동 복귀 | 입력 멈춤 3초 후 자동 복귀 (복귀 타이머 표시) |
| 전환 끊김 | 10회 사이클 중 부자연스러운 끊김 0회 |
| AI 복귀 품질 | 자동 복귀 후 AI가 현재 상황에 맞는 행동 즉시 시작 |
| 시각 표시 | 현재 모드(AUTO/MANUAL) 표시가 명확 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 복귀가 갑작스러움 | 복귀 전 "AUTO 복귀 3...2...1..." 카운트다운 UI 표시 |
| AI 복귀 후 멍함 | 복귀 시 `_evaluateSituation()` 즉시 호출, 주변 적/아군 재스캔 |
| 전환 시 유닛 멈춤 | 전환 프레임에서 속도 벡터 유지 (급정지 방지) |

---

### 4.5 POC-T1-05: 피로도가 전술적 판단을 강제하는가

| 항목 | 내용 |
|------|------|
| **검증 질문** | "피로가 쌓이면 자동전투가 약해져서 직접 개입해야 하는가?" |
| **검증 요소** | BTL-09, BTL-10, BTL-11, BTL-12, BTL-13, BTL-16 |
| **공수** | 1일 |
| **의존성** | T0-04 |

**테스트 시나리오:**

```
3연전 피로 누적 테스트:
  전투1 (NORMAL): 자동전투 → 승률/전투시간 기록
  전투2 (TIRED):  자동전투 → 승률/전투시간 기록 (속도-20% 적용)
  전투3 (EXHAUSTED): 자동전투 → 승률/전투시간 기록 (속도-50% 적용)

비교: 전투3에서 직접 개입했을 때 vs 자동전투만 했을 때
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 피로 체감 | 전투3 전투시간이 전투1 대비 50% 이상 증가 |
| TIRED 시각 확인 | 속도 감소가 육안으로 확인 가능 |
| COLLAPSED 확인 | 피로도 91%+ 시 행동 정지 |
| 개입 필요성 | 전투3에서 자동전투 승률 < 전투1 자동전투 승률 - 30% (피로 때문에 개입이 필요해짐) |
| FT 바 색상 | 녹(NORMAL) → 황(TIRED) → 적(EXHAUSTED) → 점멸(COLLAPSED) |
| 조작감 유지 | 피로 상태에서 직접 조작 시 응답성은 유지 (이동속도만 감소) |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 피로 차이 미미 | FATIGUE_ATTACK 10→15, 속도 감소폭 확대 |
| 3연전 해도 안 쌓임 | 피로 증가량 상향, 전투간 자연 회복 제거/축소 |
| 피로 상태 직접 조작 불쾌 | 입력 응답성(50ms) 유지하되 이동속도만 감소 확인 |

---

### Phase 1 GATE 조건

```
GATE 1: Phase 1 5개 POC 중 T1-01, T1-03, T1-04 필수 PASS
  - T1-01 FAIL: 전환 로직 재구현 (1일 버퍼)
  - T1-02 FAIL: 대형 시스템 파라미터 재설계 (2일 버퍼). 대형 자체를 단순화 가능 (5종→3종)
  - T1-03 FAIL: AI 명령 처리 로직 재작성 (1일 버퍼)
  - T1-04 FAIL: 전환 메커니즘 재설계 (1일 버퍼)
  - T1-05 FAIL: 피로 파라미터 조정 (1일 버퍼)
```

---

## 5. Phase 2: 시스템 확장 (5일)

> Phase 2는 전투 시스템 확장과 플랫폼 호환성을 검증한다. 자동전투 기본 전제 하에서 각 시스템이 의미 있게 작동하는지 확인한다.

### 5.1 POC-T2-01: 마법 (AI 자동 시전 + 직접 시전)

| 항목 | 내용 |
|------|------|
| **검증 질문** | "AI 힐러가 자동으로 힐하는가? 마법사를 직접 잡으면 더 잘 쓸 수 있는가?" |
| **검증 요소** | ACT-06, BTL-17, BTL-19, BTL-20, BTL-22 |
| **공수** | 1.5일 |
| **의존성** | T0-04 |

**테스트 시나리오:**

```
[시나리오 A: AI 자동 마법]
  소토카(힐러) AI가 자동전투 중:
    - HP 50% 이하 아군 발생 시 자동 힐 시전
    - 적 밀집 시 범위 마법 자동 판단

[시나리오 B: 직접 시전]
  엘레인(마법사) 직접 제어:
    - 방향키 + M키로 화염구 수동 시전
    - 적 밀집 지점에 정확히 조준 가능 (AI보다 정밀)

[시나리오 C: 비교]
  마법 사용 팀 5회 vs 물리 전용 팀 5회 자동전투
  수동 마법 시전 5회 vs AI 자동 마법 시전 5회
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| AI 힐 자동 시전 | HP 50% 이하 아군 발생 시 3초 이내 자동 치유 |
| 화염구 범위 | 범위 60px 내 적 전원 데미지 확인 |
| 마법 승률 차이 | 마법 팀 승률이 물리 전용 팀 대비 15% 이상 높음 |
| 수동 > 자동 | 수동 마법 시전이 AI 마법보다 데미지 효율 20% 이상 높음 (정밀 조준 덕분) |
| 마법→상태이상 | 화염구→burn, ice_bolt→slow 정상 전달 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| AI 힐 반응 느림 | HP 임계값 50%→60%, 힐 판단 우선순위 상향 |
| 수동/자동 차이 없음 | AI 마법 조준 정확도 하향 (범위 가장자리 50% 확률 빗나감) |
| 마법 약함 | 마법 데미지 계수 상향 |

---

### 5.2 POC-T2-02: 모바일 터치 (터치로 유닛 선택 + 직접 제어)

| 항목 | 내용 |
|------|------|
| **검증 질문** | "자동전투 관전 중 유닛을 탭하면 직접 제어로 전환되는가? 터치로 전투 조작이 가능한가?" |
| **검증 요소** | ACT-15, ACT-16, ACT-18, ACT-21, ACT-22 |
| **공수** | 1일 |
| **의존성** | T0-01, T1-01, T1-03 |
| **플랫폼** | Android |

**테스트 시나리오:**

```
Android 기기에서 3v3 자동전투:
  1. 자동전투 관전 중 유닛 탭 → 해당 유닛 직접 제어 전환
  2. 가상 조이스틱(좌측 하단)으로 이동
  3. 공격 버튼(우측 하단)으로 공격
  4. 적 유닛 탭으로 타겟 지정
  5. 좌우 스와이프로 유닛 전환
  6. 명령 영역 길게 누르기 → 방사형 메뉴 → 명령 변경
  7. 3초 터치 없음 → 자동 복귀
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 유닛 탭 선택 | 유닛 탭 시 해당 유닛으로 즉시 전환 (히트박스 48dp) |
| 가상 조이스틱 | 8방향 자유 이동 가능 |
| 공격 버튼 | 연타 공격 자연스러움 |
| 스와이프 전환 | 0.5초 이내 전환 |
| 명령 휠 | 5개 명령 선택 가능 |
| 자동 복귀 | 터치 없으면 3초 후 AUTO 복귀 |

**FAIL 시 대응:**

| 실패 유형 | 대응 |
|-----------|------|
| 유닛 탭 부정확 | 히트박스 48dp→64dp 확대, 가장 가까운 유닛 자동 선택 |
| 조이스틱 불편 | 조이스틱 감도/크기 조정, 자동 타겟팅 강화 |
| 명령 휠 사용 어려움 | 휠→단순 리스트 전환 |

---

### 5.3 POC-T2-03: 상태이상/환경

| 항목 | 내용 |
|------|------|
| **검증 질문** | "상태이상과 환경이 자동전투에 체감 가능한 영향을 주는가?" |
| **검증 요소** | BTL-26, BTL-30 |
| **공수** | 0.5일 |
| **의존성** | T0-04, T2-01 |

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 스턴 | 3초간 이동/공격 불가, 종료 후 즉시 행동 재개 |
| 어둠 지형 | 감지 범위 200px→100px 감소, AI가 적을 늦게 발견 |

**FAIL 시 대응:** 상태이상 지속 시간/환경 효과 수치 조정.

---

### 5.4 POC-T2-04: 성장 체감

| 항목 | 내용 |
|------|------|
| **검증 질문** | "레벨업하면 자동전투에서도 확실히 강해진 게 보이는가?" |
| **검증 요소** | RPG-01, RPG-02, RPG-04, RPG-05, RPG-07 |
| **공수** | 0.5일 |
| **의존성** | T0-04 |

**테스트 시나리오:**

```
자동전투 관전으로 비교:
  Lv1 아레스 vs 고블린 3체 → 자동전투 (고전, 전투시간 기록)
  Lv3 아레스 vs 고블린 3체 → 자동전투 (여유, 전투시간 기록)
  Lv5 아레스 vs 고블린 3체 → 자동전투 (압도, 전투시간 기록)
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| DPS 체감 | Lv+2에서 DPS 30% 이상 증가 |
| 전투시간 | Lv+4에서 전투시간 50% 이상 단축 |
| 부대원 성장 | 전투 참여 부대원이 EXP 획득 확인 |
| 관전 차이 | 레벨 차이가 자동전투 관전으로도 체감됨 |

**FAIL 시 대응:** 레벨업 스탯 성장량 조정 (ATK+2→ATK+3), 경험치 곡선 조정.

---

### 5.5 POC-T2-05: 장비/아이템

| 항목 | 내용 |
|------|------|
| **검증 질문** | "장비 교체와 아이템 사용이 전투에서 체감되는가?" |
| **검증 요소** | RPG-08, RPG-12 |
| **공수** | 0.5일 |
| **의존성** | T2-04 |

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 무기 교체 | 강화 무기(ATK+10) 장착 후 데미지 증가 체감 |
| HP 포션 | 사용 시 HP 50 즉시 회복 + 팝업 |
| 아이템 경직 | 사용 중 0.5초 경직 (남용 방지) |

**FAIL 시 대응:** 장비 보너스 수치 조정, 아이템 경직 0.3~0.8초 조정.

---

### 5.6 POC-T2-06: 맵 탐색

| 항목 | 내용 |
|------|------|
| **검증 질문** | "맵을 이동할 때 부대원이 잘 따라오고, 적을 만나면 자동전투가 시작되는가?" |
| **검증 요소** | ADV-01, ADV-06 |
| **공수** | 1.5일 |
| **의존성** | T0-01 |

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 타일맵 렌더링 | 60FPS |
| 충돌 처리 | 벽/장애물 통과 불가 |
| 부대원 추종 | 리더 이동 시 부대원 AI가 FOLLOW로 따라옴 |
| 카메라 추적 | 주인공/선택 유닛 추적 |
| 미니맵 | 현재 위치 + 유닛 표시 |
| 전투 전환 | 적 감지 시 자동전투 자연스럽게 시작 |

**FAIL 시 대응:** 타일맵 청크 렌더링 최적화, 충돌 레이어 단순화.

---

### Phase 2 GATE 조건

```
GATE 2: T2-01, T2-02 필수 PASS. 나머지는 파라미터 조정 가능.
  - T2-01 FAIL: 마법 데미지/AI 판단 로직 조정 (1일 버퍼)
  - T2-02 FAIL: 터치 UI 재설계 (2일 버퍼)
  - T2-03~T2-06: 파라미터 조정으로 대응 가능 (각 0.5일)
```

---

## 6. Phase 3: 연출/콘텐츠 (2.5일)

> Phase 3는 시각적 피드백과 콘텐츠 시스템을 검증한다. 자동전투 관전 시에도 시각 피드백이 충분한지가 추가 관점이다.
>
> **참고:** 오디오 피드백(타격음, 피격음 등)은 관전 재미에 중요하나 POC 단계에서는 시각 피드백만 검증. 오디오는 본개발에서 통합 검증.

### 6.1 POC-T3-01: Rive 캐릭터

| 항목 | 내용 |
|------|------|
| **검증 질문** | "Rive 애니메이션이 자동전투 관전에서 캐릭터를 생동감 있게 만드는가?" |
| **검증 요소** | SEN-01, SEN-02 |
| **공수** | 0.5일 |
| **의존성** | 없음 |
| **플랫폼** | Android 전용 (Windows Rive segfault 이슈) |

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| Rive 렌더링 | Android에서 `.riv` 파일 정상 로드/렌더링 |
| State Machine | idle/walk/attack/hurt/die 전환 0.1초 이내 |
| 동시 렌더링 | 6체(아군3+적3) 동시 60FPS |
| API 호환 | fallback 렌더러와 동일 인터페이스 |
| 관전 생동감 | 자동전투 관전 시 캐릭터 모션이 전투 상태를 잘 전달 |

**FAIL 시 대응:** Rive 포기, sprite sheet 전환 결정.

---

### 6.2 POC-T3-02: 대화 시스템

| 항목 | 내용 |
|------|------|
| **검증 질문** | "대화 시스템이 자연스럽게 동작하는가?" |
| **검증 요소** | ADV-09 |
| **공수** | 0.5일 |
| **의존성** | 없음 |

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 타이핑 효과 | 문자별 표시 정상 |
| 탭/Enter 진행 | 즉시 표시 또는 다음 대사 |
| 게임 정지 | 대화 중 자동전투 일시정지 |

**FAIL 시 대응:** 타이핑 속도/UI 레이아웃 조정.

---

### 6.3 POC-T3-03: 타격 피드백 폴리시

| 항목 | 내용 |
|------|------|
| **검증 질문** | "자동전투 관전 중에도 타격 피드백이 충분히 보이는가?" |
| **검증 요소** | SEN-07, SEN-08, SEN-11, SEN-17 |
| **공수** | 1일 |
| **의존성** | T0-02 |

T0-02에서 구현한 (C) 단계 종합 폴리시. 자동전투 관전 관점 추가.

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 히트 플래시 | 피격 시 흰색 깜빡임 0.1초 (관전 시에도 가시적) |
| 히트스톱 | 타격 순간 2프레임 정지 |
| 데미지 팝업 | 숫자 위로 떠오르며 소멸, 크리티컬=빨강 큰 글자 |
| HP 바 | lerp 기반 부드러운 감소 (0.3초) |
| 관전 가시성 | 자동전투 관전 중 다수 유닛 동시 교전에서도 피드백 식별 가능 |
| FPS | 60FPS 유지 |

**FAIL 시 대응:** 이펙트 파라미터(지속 시간, 크기, 색상) 조정. 동시 이펙트 수 제한.

---

### Phase 3 GATE 조건

```
GATE 3: T3-01 FAIL → sprite sheet 전환 결정 (2일 버퍼)
         T3-02, T3-03 → 파라미터 조정으로 대응 (각 0.5일)
```

---

## 7. 통합 시나리오

### POC-INT-01: 3분 연속 플레이 통합 검증

| 항목 | 내용 |
|------|------|
| **검증 질문** | "관전→개입→명령→전환→관전 사이클이 3분 동안 자연스럽게 이어지는가?" |
| **검증 요소** | 전체 시스템 통합 |
| **공수** | 0.5일 |
| **의존성** | Phase 0~2 전체 |

**테스트 시나리오:**

```
3분 연속 전투 플레이:

[0:00~0:30] 전투1 시작. 전원 자동전투. 관전.
[0:30~0:45] 타로 HP 낮음 발견 → Q키로 타로 선택 → WASD로 후퇴 → 입력 멈춤 → AI 복귀
[0:45~1:00] 대형 V자→CIRCLE 변경 (C키). 관전.
[1:00~1:15] 엘레인 선택 → 화염구 수동 시전 → 입력 멈춤 → AI 복귀
[1:15~1:30] 전투1 종료. 피로 누적.
[1:30~2:00] 전투2 시작. Tab으로 부대2 전환 → 시누세 직접 제어로 개입
[2:00~2:15] 부대2 RETREAT 명령 → 관전
[2:15~2:30] 아레스 부대로 복귀 → 아레스 직접 제어로 보스급 적 집중 공격
[2:30~3:00] 전투3. EXHAUSTED 상태. 직접 개입 빈도 증가. 승리.
```

| 측정 항목 | PASS 기준 |
|-----------|-----------|
| 시스템 충돌 | 모든 시스템이 동시 작동, 크래시 0건 |
| 조작감 일관성 | 관전→개입→관전 전환 시 끊김 없음 |
| FPS | 3분 내내 60FPS 유지 |
| 피로 누적 | 3연전에서 피로 효과 체감 |
| 전환 자연스러움 | 유닛/부대 전환이 전투 흐름을 깨지 않음 |
| 개입 가치 | 3분 플레이 후 "내가 개입한 덕분에 이겼다" 확신 |

**FAIL 시 대응:** 충돌 원인 분석 및 개별 시스템 수정. 시스템 간 의존성 정리.

---

## 8. 전체 일정 및 의존성

### 8.1 Phase별 일정 (총 16.5일)

```
Phase 0 (3일): 핵심 게임 필
  Day 1:  T0-01 (AI+조작 1d)
  Day 1:  T0-03 (성격 0.5d) [T0-01과 병렬 가능, 단 T0-01 자동전투 부분 선행]
  Day 2:  T0-02 (타격감 1d)
  Day 3:  T0-04 (개입 가치 1d)
  [GATE 0: 4개 중 1개라도 FAIL → 파라미터 조정 / 2개+ FAIL → 전체 재설계]

Phase 1 (5.5일): 전술적 깊이
  Day 4:    T1-01 (유닛/부대 전환 1d)
  Day 5-6:  T1-02 (대형 2d)
  Day 7:    T1-03 (명령 1d) + T1-04 (자동/수동 전환 0.5d) [병렬]
  Day 8:    T1-05 (피로도 1d)
  [GATE 1: T1-01/T1-03/T1-04 필수 PASS]

Phase 2 (5일): 시스템 확장
  Day 9-10:  T2-01 (마법 1.5d)
  Day 10:    T2-03 (상태이상 0.5d) [T2-01 이후 직렬]
  Day 11:    T2-02 (터치 1d)
  Day 12:    T2-04 (성장 0.5d) + T2-05 (장비 0.5d) [병렬]
  Day 13:    T2-06 (맵 탐색 1.5d 시작)
  [GATE 2: T2-01/T2-02 필수 PASS]

Phase 3 (2.5일 + 통합 0.5일 = 3일)
  Day 14:  T3-01 (Rive 0.5d) + T3-02 (대화 0.5d) [병렬]
  Day 15:  T3-03 (타격 피드백 폴리시 1d)
  Day 16:  T2-06 완료(0.5d) + POC-INT-01 (통합 0.5d)
  [GATE 3: T3-01 FAIL → sprite sheet 전환]
```

### 8.2 의존성 맵

```
T0-01 (AI+조작) ──→ T0-02 (타격) ──→ T0-04 (개입 가치) ──┬→ T1-04 (자동/수동)
     │                    │                                 ├→ T1-05 (피로)
     │                    │                                 ├→ T2-01 (마법) ──→ T2-03 (상태이상)
     │                    │                                 ├→ T2-04 (성장) ──→ T2-05 (장비)
     │                    │                                 └→ POC-INT-01
     │                    └→ T3-03 (피드백 폴리시)
     │
     ├→ T1-01 (전환) ──→ T2-02 (터치) ──→ POC-INT-01
     └→ T2-06 (맵 탐색)

T0-03 (성격) ──→ T1-02 (대형) ──→ T1-03 (명령) ──→ POC-INT-01

(없음) ──→ T3-01 (Rive)
(없음) ──→ T3-02 (대화)
```

### 8.3 실패 시 버퍼

| Gate | 실패 조건 | 대응 | 버퍼 |
|------|-----------|------|:----:|
| GATE 0 | 핵심 체감 미달 | 파라미터 조정 / 전체 재설계 | 2일 |
| GATE 1 | 전술 시스템 무의미 | 파라미터 재설계 | 2일 |
| GATE 2 | 터치 조작 불가 | 터치 UI 재설계 | 2일 |
| GATE 3 | Rive 실패 | sprite sheet 전환 | 2일 |

**총 일정:** 16.5일 (정상) + 최대 8일 (4 Gate x 2일 버퍼) = **최대 24.5일**

---

## 9. PASS/FAIL 기준 요약표

| POC ID | Phase | 핵심 PASS 지표 | FAIL 시 대응 |
|--------|:-----:|---------------|-------------|
| T0-01 | 0 | AI 합리 행동, 이동 50ms, 전환 0.1초 | AI 파라미터 조정, 입력 버퍼링 |
| T0-02 | 0 | (C) 타격감 확실, 관전 시 가시적, 60FPS | 히트스톱 1~5프레임, 넉백 조정 |
| T0-03 | 0 | 5초 관찰로 성격 구분, 교전 시간차 2초+ | 성격 파라미터 편차 확대 |
| T0-04 | 0 | 수동-자동 승률차 20%+ OR 생존자차 1.0명+, 자동 승률 30~70% | 밸런스 전면 조정 |
| T1-01 | 1 | 전환 0.3초 내 조작, 카메라 lerp, AI 자동 복귀 | 전환/카메라 로직 최적화 |
| T1-02 | 1 | 대형별 자동전투 양상 구분, CIRCLE 피해 30%+ 감소 | 오프셋/보너스 조정 |
| T1-03 | 1 | 명령 후 0.5초 내 행동 변경, RETREAT 즉시 | AI 반응 속도 향상 |
| T1-04 | 1 | 자동→수동 0.1초, 수동→자동 3초, 끊김 0회 | 전환 로직 개선 |
| T1-05 | 1 | 3전 전투시간 50%+ 증가, 피로 시 개입 필요 | 피로 증감량 조정 |
| T2-01 | 2 | AI 힐 3초 내, 화염구 범위, 수동마법 > 자동마법 | 마법 위력/AI 판단 조정 |
| T2-02 | 2 | 유닛 탭 선택, 8방향 이동, 스와이프 전환 | 터치 영역 확대, 자동 타겟팅 |
| T2-03 | 2 | 스턴 3초 불가, 어둠 감지 50% 감소 | 지속시간/수치 조정 |
| T2-04 | 2 | Lv+2 DPS 30%+, 관전으로도 성장 체감 | 스탯 성장량 조정 |
| T2-05 | 2 | 데미지 증가 체감, HP 포션 50 회복+팝업 | 장비 보너스 조정 |
| T2-06 | 2 | 타일맵 60FPS, 충돌, 부대원 추종, 전투 전환 | 청크 렌더링 최적화 |
| T3-01 | 3 | Rive 렌더링(Android), 6체 60FPS, 관전 생동감 | sprite sheet 전환 |
| T3-02 | 3 | 타이핑 효과, 탭 진행, 자동전투 정지 | UI 레이아웃 변경 |
| T3-03 | 3 | 히트플래시+히트스톱+팝업+HP lerp, 관전 가시성 | 이펙트 파라미터 조정 |
| INT-01 | 통합 | 관전→개입→명령→전환→관전 사이클 3분, 60FPS | 개별 시스템 수정 |

---

## 10. 기존 코드 자산 활용

### 10.1 재사용 가능한 시스템 (14개, 193/193 테스트 통과)

| 파일 | 용도 | 본 설계에서의 역할 |
|------|------|-------------------|
| `ai_brain.dart` | AI 상태머신 9개 + 성격 3종 | **핵심**. 자동전투의 기반 |
| `combat_system.dart` | 데미지/명중/회피 공식 | 그대로 사용 |
| `fatigue_system.dart` | 피로도 4단계 | 자동전투 성능 저하의 핵심 |
| `magic_system.dart` | 마법 8종 | AI 자동 시전 + 수동 시전 |
| `status_effect_system.dart` | 상태이상 6종 | 그대로 사용 |
| `environment_system.dart` | 환경 지형 6종 | 그대로 사용 |
| `experience_system.dart` | 경험치/레벨업 | 자동전투 관전에서도 성장 체감 |
| `equipment_system.dart` | 장비 시스템 | 그대로 사용 |
| `inventory_system.dart` | 인벤토리 | 그대로 사용 |
| `shop_system.dart` | 상점 | 그대로 사용 |
| `achievement_system.dart` | 업적 28개 | 그대로 사용 |
| `ending_system.dart` | 엔딩 3종 | 그대로 사용 |
| `newgame_plus_system.dart` | NG+ | 그대로 사용 |
| `spatial_hash.dart` | 공간 분할 해시맵 | AI 자동전투 성능 최적화 |

### 10.2 주요 수정 대상

| 파일 | 변경 내용 | 관련 POC |
|------|-----------|----------|
| `player_unit_component.dart` | 기본 상태를 AI로 변경, WASD 입력 시 수동 전환, 입력 없음 3초 후 자동 복귀 | T0-01, T1-04 |
| `game_manager.dart` | 유닛/부대 전환 시 이전 유닛 AI 자동 복귀, 주인공 사망 GAME OVER | T1-01, T0-04 |
| `ai_brain.dart` | 성격 파라미터 편차 확대 (관전 재미), 명령 반응성 향상 | T0-03, T1-03 |
| `game_camera.dart` | `smoothFollow` lerp, `shake()`, 관전 모드 줌아웃 | T0-02, T1-01 |
| `battle_controller.dart` | 자동전투 시뮬레이션 50회, 통계 수집 | T0-04 |
| `game_input_handler.dart` | 명령 스텁 완성, 자동/수동 전환 키 바인딩 | T1-03, T1-04 |

### 10.3 신규 파일

| 파일 | 경로 | 용도 | 관련 POC |
|------|------|------|----------|
| `auto_manual_controller.dart` | `lib/game/systems/` | 자동/수동 전환 상태 관리, 3초 타이머, 모드 표시 | T1-04 |
| `formation_calculator.dart` | `lib/game/systems/` | 대형별 위치 오프셋 계산 (5종) | T1-02 |
| `touch_input_handler.dart` | `lib/game/input/` | 모바일 터치 입력 (유닛 탭 선택, 조이스틱, 명령 휠) | T2-02 |
| `map_renderer.dart` | `lib/game/components/map/` | Tiled 타일맵 렌더링 | T2-06 |
| `dialogue_overlay.dart` | `lib/presentation/widgets/` | 대화 UI 오버레이 | T3-02 |
| `hud_overlay.dart` | `lib/presentation/widgets/` | 전투 HUD (HP/FT/명령/AUTO 표시) | T0-04, T1-05 |

---

## 11. 커밋 전략

| Phase | 커밋 단위 | 형식 |
|-------|-----------|------|
| Phase 0 | POC 1개 = 커밋 1개 | `poc(T0-XX): description - PASS/FAIL` |
| Phase 1 | POC 1개 = 커밋 1개 | `poc(T1-XX): description - PASS/FAIL` |
| Phase 2 | POC 1~2개 = 커밋 1개 | `poc(T2-XX): description - PASS/FAIL` |
| Phase 3 | Phase 전체 = 커밋 1~2개 | `poc(T3): phase 3 verification - results` |
| Gate 실패 | 수정 1건 = 커밋 1개 | `fix(T0-XX): description` |
| 통합 | 통합 = 커밋 1개 | `poc(INT-01): integration test - PASS/FAIL` |

예시:
```
poc(T0-01): AI 자동전투 품질 + 직접 제어 반응성 50ms - PASS
poc(T0-04): 수동 개입 승률 +25%, 자동 승률 45% - PASS
fix(T0-03): AGGRESSIVE 교전 거리 250px 확대, 성격 구분 개선
poc(T1-04): 자동↔수동 전환 매끄러움 검증, 3초 복귀 - PASS
poc(INT-01): 3분 관전+개입 사이클 통합 - PASS
```

---

## 12. 설계 원칙 체크리스트

모든 POC에서 아래 원칙이 일관되게 반영되었는지 확인한다.

| 원칙 | 확인 항목 |
|------|-----------|
| **자동전투가 기본** | POC 시작 시 전원 AI 자동전투 상태인가? |
| **직접 제어는 전술적 개입** | 직접 제어가 "언제나 하는 것"이 아니라 "필요할 때 하는 것"인가? |
| **관전이 재밌다** | AI만으로 진행되는 전투를 보고 있어도 지루하지 않은가? |
| **개입하면 달라진다** | 직접 제어했을 때 자동전투보다 확실히 나은 결과가 나오는가? |
| **놓으면 돌아간다** | 입력을 멈추면 AI가 자연스럽게 이어받는가? |
| **지휘도 가능하다** | 직접 제어 없이 명령/대형만으로도 전투 양상을 바꿀 수 있는가? |
